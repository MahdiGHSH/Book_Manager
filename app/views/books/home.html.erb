<p id="notice"><%= notice %></p>

<h1>Home page</h1>
<h4> our 3 latest books</h4>


<!--Book subjects drop down menu-->

<table class="table table-striped">
  <thead>
  <tr>
    <th>Image</th>
    <th>Title</th>
    <th>Subject</th>
    <th>Author</th>
    <th>Publish date</th>
    <th>Price</th>
    <th>Description</th>
    <th colspan="3"></th>
  </tr>
  </thead>

  <tbody>
  <!--Sort the books by date from newest to  oldest-->
  <% @books =  @books.order("publish_date DESC") %>
  <% @books.each do |book| %>
    <tr>
      <%if book.image.attached? %>
        <td><%= image_tag book.image, style: "width: 100px; display: block" %></td>
      <%else %>
        <td><%= 'No Image'%></td>
      <%end %>
      <td><%= book.title %></td>
      <td><%= book.subject.name %></td>
      <td><%= book.author %></td>
      <td><%= book.publish_date %></td>
      <td><%= book.price %></td>
      <td><%= book.description %></td>
      <td><%= link_to 'Show', book %></td>
      <td><%= link_to 'Edit', edit_book_path(book) %></td>
      <td><%= link_to 'Destroy', book, method: :delete, data: { confirm: 'Are you sure?' } %></td>
    </tr>
    <!--Shows only last 3 books-->
    <%break if book == @books[2] %>
  <% end %>

  </tbody>
</table>

<br>

<%= link_to 'New Book', new_book_path %>
